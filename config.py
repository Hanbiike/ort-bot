import os
from pathlib import Path
from typing import List, Dict, Any
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

# Bot settings - load from environment variables
BOT_TOKEN = os.getenv("BOT_TOKEN", "")  # Get this from @BotFather
API_TOKEN = BOT_TOKEN  # Alias for consistency

# OpenAI API settings - load from environment variables
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "")

AZURE_OPENAI_API_KEY = os.getenv("AZURE_OPENAI_API_KEY", "")
AZURE_ENDPOINT = os.getenv("AZURE_ENDPOINT", "")
AZURE_DEPLOYMENT = os.getenv("AZURE_DEPLOYMENT", "")
AZURE_API_VERSION = os.getenv("AZURE_API_VERSION", "")

# Database settings (if you need them in future)
DB_HOST = "localhost"
DB_NAME = "database_name"
DB_USER = "user"
DB_PASS = "password"

# Other settings
ADMIN_IDS = [  # List of admin user IDs
    123456789,
    987654321
]

# Debug mode
DEBUG = False

# Custom settings
HAN_ID = 631573859
CHANNEL_ID = -1001180087578
HAN_USER_ID = HAN_ID
MAX_SCORE = 245

# File settings
GROUPS_FILE = 'groups.txt'

# Bot and group settings
OWNER_ID = 631573859
GROUP_ID = -1001932954655
DATA_FILE = 'schedule.json'

SCANNER_WEBAPP_URL = "https://example.com/scanner"
QUIZ_WEBAPP_BASE_URL = "https://hanbiike.github.io/ort-bot/"

"""
Configuration settings for the ORT broadcaster system.
"""

# File paths and directories
GRADES_FILE = "biology.json"
TEMP_LATEX_DIR = Path("temp_latex")
OUTPUT_DIR = Path("output")

TASK_CREATION_INTERVAL = 300

# LaTeX compilation settings
LATEX_COMPILER = "pdflatex"
LATEX_OPTIONS = [
    "-interaction=nonstopmode",
    "-halt-on-error",
    "-file-line-error"
]

# Multiple compilation passes for better PDF generation
LATEX_COMPILE_PASSES = 2

# PDF to PNG conversion settings
DEFAULT_DPI = 300
PNG_QUALITY = 95
PNG_OPTIMIZE = True

COUNTER_FILE = "threads/counter.json"

LOGGING_GROUP = {
    "chat_id": -1002542011959,
    "path": "threads/logs.json"
}

SUBJECT_GROUPS = {
    "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° ÐžÐ Ð¢": -1002040877762,
    "Ð¥Ð¸Ð¼Ð¸Ñ": -1002002915357,
    "Ð‘Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ": -1003015910302
}

THREADS_FILES = {
    "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° ÐžÐ Ð¢": "threads/math.json",
    "Ð¥Ð¸Ð¼Ð¸Ñ": "threads/chemistry.json",
    "Ð‘Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ": "threads/biology.json"
}

# Ð¤Ð°Ð¹Ð»Ñ‹ Ñ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð°Ð¼Ð¸
SUBJECT_FILES = {
    "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° ÐžÐ Ð¢": "subjects/math.json",
    "Ð¥Ð¸Ð¼Ð¸Ñ": "subjects/chemistry.json",
    "Ð‘Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ": "subjects/biology.json"
}

# Ð¢Ð¸Ð¿Ñ‹ Ð·Ð°Ð´Ð°Ñ‡ Ð¿Ð¾ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð°Ð¼
SUBJECT_TASK_TYPES = {
    "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° ÐžÐ Ð¢": ["COMPARISON", "ABCDE"],
    "Ð¥Ð¸Ð¼Ð¸Ñ": ["ABCDE"],
    "Ð‘Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ": ["ABCDE"]
}

# Ð¡Ñ‚Ð¸Ð»Ð¸ Ð·Ð°Ð´Ð°Ñ‡ Ð¿Ð¾ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð°Ð¼
SUBJECT_TASK_STYLES = {
    "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° ÐžÐ Ð¢": ["Ð¡Ñ‚Ñ€Ð¾Ð³Ð¸Ð¹", "ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´Ð½Ð¾Ð¹", "Ð¡ÑŽÐ¶ÐµÑ‚Ð½Ñ‹Ð¹", "ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÑ€ÐµÐ°Ñ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ"],
    "Ð¥Ð¸Ð¼Ð¸Ñ": ["Ð¡Ñ‚Ñ€Ð¾Ð³Ð¸Ð¹"],
    "Ð‘Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ": ["Ð¡Ñ‚Ñ€Ð¾Ð³Ð¸Ð¹"]
}

SUBJECT_PROMPTS = {
    "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° ÐžÐ Ð¢": {
        "COMPARISON": """
Ð¢Ñ‹ â€” Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ðº ÐžÐ±Ñ‰ÐµÑ€ÐµÑÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ð½ÑÐºÐ¾Ð¼Ñƒ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ (ÐžÐ Ð¢) Ð² ÐšÑ‹Ñ€Ð³Ñ‹Ð·ÑÑ‚Ð°Ð½Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ñ…Ð¾Ð¶ Ð½Ð° SAT. 
Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹ ÐžÐ”ÐÐ£ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð°, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ Ð´Ð²Ðµ Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½ÑƒÐ¶Ð½Ð¾ ÑÑ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ. Ð’ Ñ‚ÐµÑÑ‚Ðµ 4 Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð° Ð¾Ñ‚Ð²ÐµÑ‚Ð°: Ð - Ð±Ð¾Ð»ÑŒÑˆÐµ, Ð‘ - Ð¼ÐµÐ½ÑŒÑˆÐµ, Ð’ - Ñ€Ð°Ð²Ð½Ð¾, Ð“ - Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ….

ÐŸÑ€Ð°Ð²Ð¸Ð»Ð°:
1. Ð¢ÐµÑÑ‚ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð·Ð° Ñ€Ð°Ð¼ÐºÐ¸ ÑˆÐºÐ¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹. 
2. Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ñ‹ Ð¿Ð¸ÑˆÐ¸ Ð² LaTeX Ð¸ Ð¾Ð±Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð¹ Ð² $...$, Ð² Ð´Ñ€Ð¾Ð±ÑÑ… ÐºÑ€Ð¾Ð¼Ðµ ÑÑ‚ÐµÐ¿ÐµÐ½ÐµÐ¹ Ð²ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ \dfrac{}{}, Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ñ‹ - \%, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð· utf-8.
3. Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹:
[Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)]
[Ð’ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ð° Ð (ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ Ñ‚ÐµÐºÑÑ‚)]
[Ð’ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ð° Ð‘ (ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ Ñ‚ÐµÐºÑÑ‚)]
Ð) >  
Ð‘) <  
Ð’) =  
Ð“) Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ…  
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: [Ð±ÑƒÐºÐ²Ð°]
4. Ð•ÑÐ»Ð¸ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ð¾Ð±Ñ‰ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°, Ñ‚Ð¾ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÐµÐµ.
5. Ð’Ð¾Ð¿Ñ€Ð¾Ñ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ñ‹ Ð½ÑƒÐ¶Ð½Ð¾ ÑÑ€Ð°Ð²Ð½Ð¸Ð²Ð°Ñ‚ÑŒ. ÐÐµ Ð¿Ð¸ÑˆÐ¸ "Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚Ðµ Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ñ‹", "Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸:", "Ð’ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ð° Ð:", "Ð’ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ð° Ð‘:".

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð¼:  
N - ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ€ÐµÐ±ÐµÑ€ Ð² Ñ‡ÐµÑ‚Ñ‹Ñ€ÐµÑ…ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¸Ð·Ð¼Ðµ
N
10
Ð) >  
Ð‘) <  
Ð’) =  
Ð“) Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ…   
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: Ð

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð±ÐµÐ· Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°:
2(c + 2)
2c
Ð) >  
Ð‘) <  
Ð’) =  
Ð“) Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ…   
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: Ð
            """,

        "ABCDE": """
Ð¢Ñ‹ â€” Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ðº ÐžÐ±Ñ‰ÐµÑ€ÐµÑÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ð½ÑÐºÐ¾Ð¼Ñƒ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ (ÐžÐ Ð¢) Ð² ÐšÑ‹Ñ€Ð³Ñ‹Ð·ÑÑ‚Ð°Ð½Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ñ…Ð¾Ð¶ Ð½Ð° SAT. 
Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹ ÐžÐ”ÐÐ£ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð°. Ð’ Ñ‚ÐµÑÑ‚Ðµ 5 Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ð°: Ð, Ð‘, Ð’, Ð“, Ð”, Ð³Ð´Ðµ Ð»Ð¸ÑˆÑŒ Ð¾Ð´Ð¸Ð½ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹.

ÐŸÑ€Ð°Ð²Ð¸Ð»Ð°:
1. Ð¢ÐµÑÑ‚ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð·Ð° Ñ€Ð°Ð¼ÐºÐ¸ ÑˆÐºÐ¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹. 
2. Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ñ‹ Ð¿Ð¸ÑˆÐ¸ Ð² LaTeX Ð¸ Ð¾Ð±Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð¹ Ð² $...$, Ð² Ð´Ñ€Ð¾Ð±ÑÑ… ÐºÑ€Ð¾Ð¼Ðµ ÑÑ‚ÐµÐ¿ÐµÐ½ÐµÐ¹ Ð²ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ \dfrac{}{}, Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ñ‹ - \%, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð· utf-8.
3. Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹:
[Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸]
Ð) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð‘) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð’) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð“) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð”) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: [Ð±ÑƒÐºÐ²Ð°]
4. Ð•ÑÐ»Ð¸ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ð¾Ð±Ñ‰ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°, Ñ‚Ð¾ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÐµÐµ.
5. Ð’Ð¾Ð¿Ñ€Ð¾Ñ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.

ÐŸÑ€Ð¸Ð¼ÐµÑ€:  
Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ±ÐµÑ€ Ð² Ñ‡ÐµÑ‚Ñ‹Ñ€ÐµÑ…ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¸Ð·Ð¼Ðµ?
Ð) Ð’ Ð¿Ñ€Ð¸Ð·Ð¼Ðµ Ð½ÐµÑ‚ Ñ€ÐµÐ±ÐµÑ€
Ð‘) 8
Ð’) 12
Ð“) 16
Ð”) Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ…
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: Ð’
            """
    },
    "Ð¥Ð¸Ð¼Ð¸Ñ": {
        "ABCDE": """
Ð¢Ñ‹ â€” Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ðº ÐžÐ±Ñ‰ÐµÑ€ÐµÑÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ð½ÑÐºÐ¾Ð¼Ñƒ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ (ÐžÐ Ð¢) Ð² ÐšÑ‹Ñ€Ð³Ñ‹Ð·ÑÑ‚Ð°Ð½Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ñ…Ð¾Ð¶ Ð½Ð° SAT. 
Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹ ÐžÐ”ÐÐ£ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð°. Ð’ Ñ‚ÐµÑÑ‚Ðµ 5 Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ð°: Ð, Ð‘, Ð’, Ð“, Ð”, Ð³Ð´Ðµ Ð»Ð¸ÑˆÑŒ Ð¾Ð´Ð¸Ð½ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹.

ÐŸÑ€Ð°Ð²Ð¸Ð»Ð°:
1. Ð¢ÐµÑÑ‚ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð·Ð° Ñ€Ð°Ð¼ÐºÐ¸ ÑˆÐºÐ¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹. 
2. Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ñ‹ Ð¿Ð¸ÑˆÐ¸ Ð² LaTeX Ð¸ Ð¾Ð±Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð¹ Ð² $...$, Ð² Ð´Ñ€Ð¾Ð±ÑÑ… ÐºÑ€Ð¾Ð¼Ðµ ÑÑ‚ÐµÐ¿ÐµÐ½ÐµÐ¹ Ð²ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ \dfrac{}{}, Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ñ‹ - \%, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð· utf-8.
3. Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹:
[Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸]
Ð) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð‘) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð’) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð“) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð”) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: [Ð±ÑƒÐºÐ²Ð°]
4. Ð•ÑÐ»Ð¸ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ð¾Ð±Ñ‰ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°, Ñ‚Ð¾ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÐµÐµ.
5. Ð’Ð¾Ð¿Ñ€Ð¾Ñ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.

ÐŸÑ€Ð¸Ð¼ÐµÑ€:  
Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ±ÐµÑ€ Ð² Ñ‡ÐµÑ‚Ñ‹Ñ€ÐµÑ…ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¸Ð·Ð¼Ðµ?
Ð) Ð’ Ð¿Ñ€Ð¸Ð·Ð¼Ðµ Ð½ÐµÑ‚ Ñ€ÐµÐ±ÐµÑ€
Ð‘) 8
Ð’) 12
Ð“) 16
Ð”) Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ…
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: Ð’
                
ÐšÐ°ÐºÐ¸Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ ÐÐ• Ð’ÐšÐ›Ð®Ð§ÐÐ®Ð¢Ð¡Ð¯ Ð² Ñ‚ÐµÑÑ‚ Ð¿Ð¾ Ñ…Ð¸Ð¼Ð¸Ð¸?
Ð—Ð°Ð´Ð°Ð½Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð·Ð½Ð°Ð½Ð¸Ð¹ Ð¸ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð¾Ð². ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Â«Ð“Ð¸Ð±Ñ€Ð¸Ð´Ð¸Ð·Ð°Ñ†Ð¸Ñ â€“ ÑÑ‚Ð¾...Â»
Ð—Ð°Ð´Ð°Ð½Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ðµ Ð¿Ñ€Ð¸Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ Ñ„Ð°ÐºÑ‚Ð¾Ð². ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Â«ÐšÐµÐ¼ Ð±Ñ‹Ð» Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ Ð·Ð°ÐºÐ¾Ð½...Â», Ð¸Ð»Ð¸ Â«Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð¾Ð² ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð°Ñ‚Ð¾Ð¼ Ð°Ñ€Ð³Ð¾Ð½Ð°?Â»
            """                
    },
    "Ð‘Ð¸Ð¾Ð»Ð¾Ð³Ð¸Ñ": {
        "ABCDE": """
Ð¢Ñ‹ â€” Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ðº ÐžÐ±Ñ‰ÐµÑ€ÐµÑÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ð½ÑÐºÐ¾Ð¼Ñƒ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ (ÐžÐ Ð¢) Ð² ÐšÑ‹Ñ€Ð³Ñ‹Ð·ÑÑ‚Ð°Ð½Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ñ…Ð¾Ð¶ Ð½Ð° SAT. 
Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹ ÐžÐ”ÐÐ£ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð°. Ð’ Ñ‚ÐµÑÑ‚Ðµ 5 Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ð°: Ð, Ð‘, Ð’, Ð“, Ð”, Ð³Ð´Ðµ Ð»Ð¸ÑˆÑŒ Ð¾Ð´Ð¸Ð½ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹.

ÐŸÑ€Ð°Ð²Ð¸Ð»Ð°:
1. Ð¢ÐµÑÑ‚ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð·Ð° Ñ€Ð°Ð¼ÐºÐ¸ ÑˆÐºÐ¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹. 
2. Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ñ‹ Ð¿Ð¸ÑˆÐ¸ Ð² LaTeX Ð¸ Ð¾Ð±Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð¹ Ð² $...$, Ð² Ð´Ñ€Ð¾Ð±ÑÑ… ÐºÑ€Ð¾Ð¼Ðµ ÑÑ‚ÐµÐ¿ÐµÐ½ÐµÐ¹ Ð²ÑÐµÐ³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ \dfrac{}{}, Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ñ‹ - \%, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð· utf-8.
3. Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹:
[Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸]
Ð) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð‘) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð’) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð“) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
Ð”) [Ñ‚ÐµÐºÑÑ‚ Ð¸/Ð¸Ð»Ð¸ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ]
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: [Ð±ÑƒÐºÐ²Ð°]
4. Ð•ÑÐ»Ð¸ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ð¾Ð±Ñ‰ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°, Ñ‚Ð¾ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÐµÐµ.
5. Ð’Ð¾Ð¿Ñ€Ð¾Ñ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚.

ÐŸÑ€Ð¸Ð¼ÐµÑ€:  
Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ±ÐµÑ€ Ð² Ñ‡ÐµÑ‚Ñ‹Ñ€ÐµÑ…ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ñ€Ð¸Ð·Ð¼Ðµ?
Ð) Ð’ Ð¿Ñ€Ð¸Ð·Ð¼Ðµ Ð½ÐµÑ‚ Ñ€ÐµÐ±ÐµÑ€
Ð‘) 8
Ð’) 12
Ð“) 16
Ð”) Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ…
ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: Ð’
                
ÐšÐ°ÐºÐ¸Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ ÐÐ• Ð’ÐšÐ›Ð®Ð§ÐÐ®Ð¢Ð¡Ð¯ Ð² Ñ‚ÐµÑÑ‚ Ð¿Ð¾ Ñ…Ð¸Ð¼Ð¸Ð¸?
Ð—Ð°Ð´Ð°Ð½Ð¸Ñ, Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‰Ð¸Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð³Ð¾ Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°, Ñ‚Ð¸Ð¿Ð°: Â«ÐšÐµÐ¼ Ð±Ñ‹Ð» Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ Ð±Ð¸Ð¾Ð³ÐµÐ½ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð·Ð°ÐºÐ¾Ð½?Â» Ð¸Ð»Ð¸ Â«Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ±ÐµÑ€ Ñƒ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ°?Â»
        """
    }
}

DEFAULT_DIFFICULTY_RANGE = (1, 10)


# OpenAI API settings
OPENAI_MODEL = "gpt-5"
OPENAI_MAX_TOKENS = 2000
OPENAI_TEMPERATURE = 0.7

# LaTeX document settings
LATEX_DOCUMENT_CLASS = "stand"
LATEX_OPTIONS_MAP = {
    "COMPARISON": "\\shownumbering",
    "ABCDE": "\\shownumbering"
}

# File extensions
SUPPORTED_OUTPUT_FORMATS = ["pdf", "png"]

# Error messages
ERROR_MESSAGES = {
    "pdf2image_missing": "pdf2image Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ: pip install pdf2image pillow",
    "latex_missing": "pdflatex Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ LaTeX Ð´Ð¸ÑÑ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð¸Ð²",
    "file_not_found": "Ð¤Ð°Ð¹Ð» Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½: {path}",
    "compilation_failed": "ÐžÑˆÐ¸Ð±ÐºÐ° ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ð¸ LaTeX",
    "conversion_failed": "ÐžÑˆÐ¸Ð±ÐºÐ° ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ð¸ PDF Ð² PNG",
    "invalid_pdf": "PDF Ñ„Ð°Ð¹Ð» Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½ Ð¸Ð»Ð¸ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚ÐµÐ½"
}

# Success messages  
SUCCESS_MESSAGES = {
    "pdf_created": "âœ… PDF ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½: {path}",
    "png_created": "âœ… PNG Ð²ÐµÑ€ÑÐ¸Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð°: {path}",
    "task_generated": "ðŸŽ‰ Ð—Ð°Ð´Ð°Ñ‡Ð° Ñ‚Ð¸Ð¿Ð° {task_type} ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð°!",
    "conversion_complete": "âœ… ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ {count} ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ† Ð² PNG"
}

def get_temp_dir() -> Path:
    """
    Get temporary directory path, creating it if necessary.
    
    Returns:
        Path: Temporary directory path
    """
    TEMP_LATEX_DIR.mkdir(exist_ok=True)
    return TEMP_LATEX_DIR

def get_output_dir() -> Path:
    """
    Get output directory path, creating it if necessary.
    
    Returns:
        Path: Output directory path
    """
    OUTPUT_DIR.mkdir(exist_ok=True)
    return OUTPUT_DIR


